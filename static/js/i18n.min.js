(function(){var t,n,e,r=function(t,n){return function(){return t.apply(n,arguments)}};t=function(){function t(){this.translate=r(this.translate,this),this.data={},this.globalContext={}}return t.prototype.translate=function(t,n,e,r,l){var o,a,i,u;return null==l&&(l=this.globalContext),(i=function(t){var n;return"function"===(n=typeof t)||"object"===n&&!!t})(n)?(o=null,u=null,a=n,l=e||this.globalContext):"number"==typeof n?(o=null,u=n,a=e,l=r||this.globalContext):(o=n,"number"==typeof e?(u=e,a=r,l=l):(u=null,a=e,l=r||this.globalContext)),i(t)?(i(t.i18n)&&(t=t.i18n),this.translateHash(t,l)):this.translateText(t,u,a,l,o)},t.prototype.add=function(t){var n,e,r,l,o,a,i,u;if(null!=t)for(e in a=t)r=a[e],this.data[e]=r;if(null!=t.contexts){for(u=[],l=0,o=(i=t.contexts).length;l<o;l++)n=i[l],u.push(this.data.contexts.push(n));return u}},t.prototype.setContext=function(t,n){return this.globalContext[t]=n},t.prototype.clearContext=function(t){return this.lobalContext[t]=null},t.prototype.reset=function(){return this.data={},this.globalContext={}},t.prototype.resetData=function(){return this.data={}},t.prototype.resetContext=function(){return this.globalContext={}},t.prototype.translateHash=function(t,n){var e,r;for(e in t)"string"==typeof(r=t[e])&&(t[e]=this.translateText(r,null,null,n));return t},t.prototype.translateText=function(t,n,e,r,l){var o,a;return null==r&&(r=this.globalContext),null==this.data?this.useOriginalText(l||t,n,e):(null!=(o=this.getContextData(this.data,r))&&(a=this.findTranslation(t,n,e,o,l)),null==a&&(a=this.findTranslation(t,n,e,this.data,l)),null==a?this.useOriginalText(l||t,n,e):a)},t.prototype.findTranslation=function(t,n,e,r){var l,o,a,i,u;if(null==(a=r[t]))return null;if(null==n){if("string"==typeof a)return this.applyFormatting(a,n,e)}else if(a instanceof Array||a.length)for(i=0,u=a.length;i<u;i++)if((n>=(o=a[i])[0]||null===o[0])&&(n<=o[1]||null===o[1]))return l=this.applyFormatting(o[2].replace("-%n",String(-n)),n,e),this.applyFormatting(l.replace("%n",String(n)),n,e);return null},t.prototype.getContextData=function(t,n){var e,r,l,o,a,i,u,s;if(null==t.contexts)return null;for(a=0,i=(u=t.contexts).length;a<i;a++){for(l in r=!0,s=(e=u[a]).matches)o=s[l],r=r&&o===n[l];if(r)return e}return null},t.prototype.useOriginalText=function(t,n,e){return null==n?this.applyFormatting(t,n,e):this.applyFormatting(t.replace("%n",String(n)),n,e)},t.prototype.applyFormatting=function(t,n,e){var r,l;for(r in e)l=new RegExp("%{"+r+"}","g"),t=t.replace(l,e[r]);return t},t}(),e=new t,(n=e.translate).translator=e,n.create=function(e){var r;return r=new t,null!=e&&r.add(e),r.translate.create=n.create,r.translate},("undefined"!=typeof module&&null!==module?module.exports=n:void 0)||(this.i18n=n)}).call(this);
